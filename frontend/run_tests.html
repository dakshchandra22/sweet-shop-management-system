<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweet Shop Frontend Tests</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 0;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
        }
        .test-results {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üç≠ Sweet Shop Frontend Tests</h1>
        <p>Simple TDD tests for the frontend application</p>
        
        <button class="test-button" onclick="runTests()">
            üöÄ Run Frontend Tests
        </button>
        
        <div id="test-results" class="test-results" style="display: none;">
            <!-- Test results will appear here -->
        </div>
    </div>

    <script>
        // Simple test runner
        class SimpleTester {
            constructor() {
                this.tests = [];
                this.passed = 0;
                this.failed = 0;
                this.results = [];
            }

            test(name, fn) {
                this.tests.push({ name, fn });
            }

            async run() {
                this.results = [];
                this.passed = 0;
                this.failed = 0;
                
                this.log('üöÄ Starting Simple Frontend Tests for Sweet Shop');
                this.log('='.repeat(50));

                for (const test of this.tests) {
                    try {
                        this.log(`üîç Testing ${test.name}...`);
                        await test.fn();
                        this.log(`‚úÖ ${test.name} passed`);
                        this.passed++;
                    } catch (error) {
                        this.log(`‚ùå ${test.name} failed: ${error.message}`);
                        this.failed++;
                    }
                }

                this.log('='.repeat(50));
                this.log(`üéâ Tests completed: ${this.passed} passed, ${this.failed} failed`);
            }

            log(message) {
                this.results.push(message);
                console.log(message);
            }
        }

        // Create tester
        const tester = new SimpleTester();

        // Test 1: Check if page loaded
        tester.test('Page Loaded', () => {
            if (!document.body) {
                throw new Error('Document body not found');
            }
        });

        // Test 2: Check if test button exists
        tester.test('Test Button Exists', () => {
            const button = document.querySelector('.test-button');
            if (!button) {
                throw new Error('Test button not found');
            }
        });

        // Test 3: Check if CSS is loaded
        tester.test('CSS Loaded', () => {
            const styles = window.getComputedStyle(document.body);
            if (!styles.fontFamily) {
                throw new Error('CSS not loaded');
            }
        });

        // Test 4: Check if JavaScript is working
        tester.test('JavaScript Working', () => {
            if (typeof SimpleTester === 'undefined') {
                throw new Error('JavaScript classes not working');
            }
        });

        // Test 5: Check if DOM manipulation works
        tester.test('DOM Manipulation', () => {
            const testDiv = document.createElement('div');
            testDiv.id = 'test-div';
            testDiv.textContent = 'Test';
            document.body.appendChild(testDiv);
            
            const foundDiv = document.getElementById('test-div');
            if (!foundDiv || foundDiv.textContent !== 'Test') {
                throw new Error('DOM manipulation not working');
            }
            
            document.body.removeChild(testDiv);
        });

        // Test 6: Check if event handling works
        tester.test('Event Handling', () => {
            let eventFired = false;
            const testButton = document.createElement('button');
            testButton.addEventListener('click', () => {
                eventFired = true;
            });
            
            testButton.click();
            
            if (!eventFired) {
                throw new Error('Event handling not working');
            }
        });

        // Test 7: Check if localStorage works
        tester.test('LocalStorage Works', () => {
            try {
                localStorage.setItem('test', 'value');
                const value = localStorage.getItem('test');
                if (value !== 'value') {
                    throw new Error('LocalStorage not working');
                }
                localStorage.removeItem('test');
            } catch (error) {
                throw new Error(`LocalStorage test failed: ${error.message}`);
            }
        });

        // Test 8: Check if fetch API works
        tester.test('Fetch API Works', async () => {
            try {
                const response = await fetch('http://localhost:8000/health');
                if (!response.ok) {
                    throw new Error('Backend not responding');
                }
                const data = await response.json();
                if (!data.status) {
                    throw new Error('Invalid response from backend');
                }
            } catch (error) {
                throw new Error(`Fetch API test failed: ${error.message}`);
            }
        });

        // Run tests function
        async function runTests() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = 'Running tests...';
            
            await tester.run();
            
            // Display results
            resultsDiv.innerHTML = tester.results.join('\n');
        }

        // Auto-run tests when page loads
        window.addEventListener('load', () => {
            setTimeout(runTests, 1000);
        });
    </script>
</body>
</html>




